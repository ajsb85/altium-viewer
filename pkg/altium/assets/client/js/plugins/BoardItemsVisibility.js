"use strict";(self.webpackChunkaltium_web_viewer=self.webpackChunkaltium_web_viewer||[]).push([[3857,74687,11903,318],{26940:(e,t,i)=>{var n=i(10311),r={1:"top",2:"bottom"};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=window.__APP__.library.Vuex.createStore,u=window.__APP__.library.i18n.t,p=l({state:{layers:[],objects:[],groupAllObjects:{id:"all",name:u("viewer.plugins.BoardItemsVisibility.groupAllObjects"),isVisible:!0,visibleOnly:null},prevLayersData:null,prevObjectData:null,layersViews:[{id:1,name:u("viewer.plugins.BoardItemsVisibility.layersViews.top"),isActive:!1},{id:2,name:u("viewer.plugins.BoardItemsVisibility.layersViews.bottom"),isActive:!1}],tabViews:[],activeTabView:"",activeLayersView:"top",activeView:null,activeViewId:null,hasLayerStack:!1,layerStackBadge:null,resetData:{layers:!1,objects:!1}},mutations:{setLayers:function(e,t){e.layers=Array.isArray(t)?t:[]},setObjects:function(e,t){e.objects=Array.isArray(t)?t:[]},setPrevLayersData:function(e,t){e.prevLayersData=JSON.stringify(Array.isArray(t)?t:[])},setPrevObjectData:function(e,t){e.prevObjectData=JSON.stringify(Array.isArray(t)?t:[])},setActiveView:function(e,t){e.activeView=t},setActiveViewId:function(e,t){e.activeViewId=t},setActiveLayersView:function(e,t){e.activeLayersView=t},setActiveTabView:function(e,t){e.activeTabView=t},sethasLayerStack:function(e,t){e.hasLayerStack=t},setLayerStackBadge:function(e,t){e.layerStackBadge=t},setResetData:function(e,t){e.resetData[t.key]=t.val},setTabViews:function(e,t){e.tabViews=t,e.activeTabView=t[0].id},setGroupAllObjectsVisible:function(e,t){e.groupAllObjects.isVisible=t},setGroupAllObjectsVisibleOnly:function(e,t){e.groupAllObjects.visibleOnly=t}},getters:{getTabsViews:function(e){return e.tabViews.map((function(t){return s(s({},t),{},{isActive:t.id===e.activeTabView})}))},getLayersViews:function(e){return e.layersViews.map((function(t){return s(s({},t),{},{isActive:r[t.id]===e.activeLayersView&&"PCBView3D"!==e.activeViewId})}))},isLayersPanel:function(e){return"layers"===e.activeTabView},isObjectsPanel:function(e){return"objects"===e.activeTabView},isPCBView3D:function(e){return"PCBView3D"===e.activeViewId},getIsResetData:function(e){return e.resetData[e.activeTabView]}}}),b=function(e){return p.commit("setPrevLayersData",e)},y=function(e){return p.commit("setActiveLayersView",e)},f=function(e){return p.commit("sethasLayerStack",e)},d=function(e){return p.commit("setLayerStackBadge",e)};const m=p;var v=["id"],h={class:"app-layers-panel"},g={class:"app-layers-panel__footer"},w=i(77453),V=window.__APP__.library.i18n.t;const O={name:"AppLayersFooter",components:{AfsText:w.A},data:function(){return{t:V}}};var j=i(46021);const _=(0,j.Z)(O,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsText");return(0,n.openBlock)(),(0,n.createElementBlock)("div",g,[(0,n.createVNode)(s,{class:"app-layers-panel__footer-title"},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(o.t("viewer.plugins.BoardItemsVisibility.nextPrevLayer")),1)]})),_:1}),(0,n.createVNode)(s,null,{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(o.t("viewer.plugins.BoardItemsVisibility.keyHint")),1)]})),_:1})])}]]);var P={class:"app-layers-panel__content"},A={class:"app-layers-panel__inner-wrap"},C={class:"app-layers-panel__visibility-btns"},S=["onClick"],k={class:"app-layers-panel__layer-container"},B=["onClick"],L={class:"app-layers-panel__visibility-btns"},I={class:"app-layers-panel__visibility-btn app-layers-panel__visibility-only"},D=i(13827),E=i(69314),T=i(39308),N=i(12561);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function M(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?G(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function U(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach((function(t){F(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function F(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $=window.__APP__.library.Vuex.mapState,Z=window.__APP__.library.i18n.t;const z={name:"AppLayersContent",components:{AfsButtonIcon:E.A,AfsAccordion:D.A,AfsText:w.A,AfsCheckbox:T.A},directives:{trim:N.t},props:{modelValue:{type:Array,default:function(){return[]}}},emits:["update:modelValue"],data:function(){return{savedState:null,currentOnlyId:null,checkedLayer:null,t:Z}},computed:U(U({},$(["activeViewId"])),{},{isPCB:function(){return"PCBView"===this.activeViewId},computedLayers:function(){var e=Math.max.apply(Math,M(this.modelValue.reduce((function(e,t){return e.push(Math.max.apply(Math,M(t.map((function(e){return e.id}))))),e}),[0])));return this.modelValue.map((function(t){return{items:M(t),name:t[0].layerGroup,id:++e,isVisible:t.some((function(e){return e.isVisible}))}}))}}),methods:{emitChange:function(e){this.$emit("update:modelValue",e)},onLayerClick:function(e,t,i){i.target.closest(".app-layers-panel__visibility-only")?this.changeOnlyVisibility(e,t):this.changeLayerVisibility(e,t)},getVisibilityIcon:function(e){return e?"eye-16-2":"eye-off-16-2"},setGroupVisibility:function(e,t){return e.map((function(e){return U(U({},e),{},{isVisible:t(e)})}))},changeLayerVisibility:function(e,t){var i=this;if(this.isPCB)this.changeLayerVisibilityPCB(e,t);else{var n=this.modelValue.map((function(n,r){return r!==t?n:i.setGroupVisibility(n,(function(t){return t.id===e.id?!t.isVisible:t.isVisible}))}));this.emitChange(n)}},changeLayerVisibilityPCB:function(e,t){var i=this,n=this.modelValue.map((function(n,r){return r!==t?n:i.setGroupVisibility(n,(function(t){return t.id===e.id?!t.isVisible:t.isVisible})).map((function(t){return U(U({},t),{},{isActive:!(t.id===e.id&&!t.isVisible)&&t.isActive})}))}));e.isActive?(this.saveActiveLayerState(e),this.setNextActiveLayer(n)):this.checkedLayer?this.setActiveLayer(n):this.emitChange(n)},changeGroupVisibility:function(e,t){var i=this;if(this.isPCB)this.changeGroupVisibilityPCB(e,t);else{var n=this.modelValue.map((function(n,r){return r!==t?n:i.setGroupVisibility(n,(function(){return!e.isVisible}))}));this.emitChange(n)}},changeGroupVisibilityPCB:function(e,t){var i=e.items.find((function(e){return e.isActive})),n=this.modelValue.map((function(i,n){return n!==t?i:i.map((function(t){return U(U({},t),{},{isActive:!e.isVisible&&t.isActive,isVisible:!e.isVisible})}))}));i?(this.saveActiveLayerState(i),this.setNextActiveLayer(n)):this.checkedLayer?this.setActiveLayer(n):this.emitChange(n)},changeOnlyVisibility:function(e){if(this.savedState&&this.currentOnlyId===e.id)return this.$emit("off-only",this.savedState),void this.clearSavedState();!this.savedState&&this.saveLayersState(),this.currentOnlyId=e.id,this.$emit("on-only",e.name)},changeOnlyGroupVisibility:function(e,t){var i=this;if(this.savedState&&this.currentOnlyId===e.id)return this.emitChange(this.savedState),void this.clearSavedState();if(!this.savedState&&this.saveLayersState(),this.currentOnlyId=e.id,this.isPCB)this.changeOnlyGroupVisibilityPCB(e,t);else{var n=this.modelValue.map((function(e,n){return i.setGroupVisibility(e,(function(e){return n===t}))}));this.emitChange(n)}},changeOnlyGroupVisibilityPCB:function(e,t){var i=this.modelValue.flat().find((function(e){return e.isVisible&&e.isActive})),n=this.modelValue.map((function(i,n){return i.map((function(i){return U(U({},i),{},{isActive:!(n!==t||!e.isVisible)&&i.isActive,isVisible:n===t})}))}));i?(this.saveActiveLayerState(i),n.flat().find((function(e){return e.isVisible&&e.isActive}))?this.emitChange(n):this.setNextActiveLayer(n)):this.checkedLayer?this.setActiveLayer(n):this.emitChange(n)},copyLayers:function(){return JSON.parse(JSON.stringify(this.modelValue))},saveLayersState:function(){this.savedState=this.copyLayers()},clearSavedState:function(){this.savedState=null},setGroupActivity:function(e,t){return e.map((function(e){return U(U({},e),{},{isActive:t(e),isVisible:!!t(e)||e.isVisible})}))},saveActiveLayerState:function(e){this.checkedLayer={id:e.id,val:e.isActive}},clearActiveLayerState:function(){this.checkedLayer=null},onClickSetActiveLayer:function(e,t){var i=this;t?this.saveActiveLayerState({id:e.id,val:t}):this.clearActiveLayerState();var n=this.modelValue.map((function(n){return i.setGroupActivity(n,(function(i){return i.id===e.id&&t}))}));this.emitChange(n)},setNextActiveLayer:function(e){if(Array.isArray(e)){var t=e.flat().find((function(e){return e.isVisible}));t&&(t.isActive=!0),this.emitChange(e)}},setActiveLayer:function(e){var t=this;if(Array.isArray(e)){if(this.hasPrevLayerVisible(e)){var i=e.map((function(e){return e.map((function(e){var i;return U(U({},e),{},{isActive:!(!e.isVisible||e.id!==(null===(i=t.checkedLayer)||void 0===i?void 0:i.id))&&t.checkedLayer.val})}))}));this.emitChange(i)}else this.emitChange(e);this.clearActiveLayerState()}},hasPrevLayerVisible:function(e){var t=this;return!!this.checkedLayer&&e.flat().some((function(e){var i;return e.id===(null===(i=t.checkedLayer)||void 0===i?void 0:i.id)&&e.isVisible}))}}},H=(0,j.Z)(z,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsText"),c=(0,n.resolveComponent)("AfsButtonIcon"),l=(0,n.resolveComponent)("AfsCheckbox"),u=(0,n.resolveComponent)("AfsAccordion"),p=(0,n.resolveDirective)("trim");return(0,n.openBlock)(),(0,n.createElementBlock)("div",P,[(0,n.createElementVNode)("div",A,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.computedLayers,(function(t,i){return(0,n.openBlock)(),(0,n.createBlock)(u,{key:t.id,"has-arrow":!1,class:"app-layers-panel__acc",opened:"","has-header-addon":""},{header:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{class:(0,n.normalizeClass)(["app-layers-panel__group-title",{"is-visible":t.isVisible}]),ellipsis:""},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(t.name),1)]})),_:2},1032,["class"])]})),"additional-menu":(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",C,[(0,n.createElementVNode)("button",{transparent:"",class:"app-layers-panel__visibility-btn app-layers-panel__visibility-only",onClick:function(e){return a.changeOnlyGroupVisibility(t,i)}},(0,n.toDisplayString)(e.t("viewer.plugins.BoardItemsVisibility.only")),9,S),(0,n.createVNode)(c,{icon:a.getVisibilityIcon(t.isVisible),transparent:"",class:(0,n.normalizeClass)(["app-layers-panel__visibility-btn",{"is-visible":!t.isVisible}]),onClick:function(e){return a.changeGroupVisibility(t,i)}},null,8,["icon","class","onClick"])])]})),body:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",k,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(t.items,(function(t,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:r,class:"app-layers-panel__layer-row"},[a.isPCB?((0,n.openBlock)(),(0,n.createBlock)(l,{key:0,modelValue:t.isActive,"onUpdate:modelValue":[function(e){return t.isActive=e},function(e){return a.onClickSetActiveLayer(t,e)}],class:(0,n.normalizeClass)(["app-layers-panel__layer-checkbox",{"is-show":t.isActive}])},null,8,["modelValue","onUpdate:modelValue","class"])):(0,n.createCommentVNode)("v-if",!0),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["app-layers-panel__layer-item",{"app-layers-panel__has-checkbox":a.isPCB}]),onClick:function(e){return a.onLayerClick(t,i,e)}},[(0,n.createElementVNode)("span",{class:"app-layers-panel__layer-color",style:(0,n.normalizeStyle)({background:t.color})},null,4),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(s,{class:(0,n.normalizeClass)(["app-layers-panel__layer-name",{"is-visible":t.isVisible}]),ellipsis:""},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(t.name),1)]})),_:2},1032,["class"])),[[p,{hint:t.name}]]),(0,n.createElementVNode)("div",L,[(0,n.createElementVNode)("button",I,(0,n.toDisplayString)(e.t("viewer.plugins.BoardItemsVisibility.only")),1),(0,n.createVNode)(c,{icon:a.getVisibilityIcon(t.isVisible),transparent:"",class:(0,n.normalizeClass)(["app-layers-panel__visibility-btn",{"is-visible":!t.isVisible}])},null,8,["icon","class"])])],10,B)])})),128))])]})),_:2},1024)})),128))])])}],["__scopeId","data-v-4cf76076"]]);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function K(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){X(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function X(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Q=window.__CORE__,W=window.__APP__,Y=W.analytics,ee=W.library.Vuex,te=ee.mapState,ie=ee.mapMutations;const ne={name:"Layers",components:{LayersFooter:_,LayersContent:H},computed:K(K({},te(["layers","activeView","prevLayersData"])),{},{hasLayersChanges:function(){return JSON.stringify(this.layers)!==this.prevLayersData}}),watch:{hasLayersChanges:{immediate:!0,handler:function(e){this.setResetData({key:"layers",val:e})}}},methods:K(K({},ie(["setResetData"])),{},{reset:function(){Q.bus.emit("BoardItemsVisibility:reset"),Y.dispatchPanelsEvent("".concat(this.activeView,".LayerFilter"),{action:"Reset"})},setLayersChange:function(e){Q.bus.emit("BoardItemsVisibility:change",e),Y.dispatchPanelsEvent("".concat(this.activeView,".LayerFilter"),{action:"VisibilityChanged"})},onOnly:function(e){Q.bus.emit("BoardItemsVisibility:onOnly",e),Y.dispatchPanelsEvent("".concat(this.activeView,".LayerFilter"),{action:"Only"})},offOnly:function(e){Q.bus.emit("BoardItemsVisibility:offOnly",e),Y.dispatchPanelsEvent("".concat(this.activeView,".LayerFilter"),{action:"Only"})}})},re=(0,j.Z)(ne,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("LayersContent"),c=(0,n.resolveComponent)("LayersFooter");return(0,n.openBlock)(),(0,n.createElementBlock)("div",h,[(0,n.createVNode)(s,{"model-value":e.layers,"onUpdate:modelValue":a.setLayersChange,onOnOnly:a.onOnly,onOffOnly:a.offOnly},null,8,["model-value","onUpdate:modelValue","onOnOnly","onOffOnly"]),(0,n.createVNode)(c,{ref:"footer"},null,512)])}],["__scopeId","data-v-4f9bec33"]]);var oe={class:"app-object-panel"},ae={class:"app-object-panel__list"},se={class:"app-object-panel__btn-visibility"},ce={class:"app-object-panel__btn-only"},le=i(77337),ue=window.__APP__.library.i18n.t;const pe={name:"AppObjectsButton",components:{AfsIcon:le._,AfsText:w.A},props:{name:{type:String,default:""},icon:{type:String,default:""},isVisible:{type:Boolean,default:!1}},computed:{iconVisible:function(){return this.isVisible?"eye-16-2":"eye-off-16-2"}},data:function(){return{t:ue}},methods:{onClick:function(e){e.target.closest(".app-object-panel__btn-only")?this.$emit("change-only"):this.$emit("change-object")}}},be=(0,j.Z)(pe,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsIcon"),c=(0,n.resolveComponent)("AfsText");return(0,n.openBlock)(),(0,n.createElementBlock)("button",{type:"button",class:(0,n.normalizeClass)(["app-object-panel__btn",{"app-object-panel__btn-disable":!i.isVisible}]),onClick:t[0]||(t[0]=function(){return a.onClick&&a.onClick.apply(a,arguments)})},[(0,n.createVNode)(s,{name:i.icon,filled:"",class:"app-object-panel__btn-picture"},null,8,["name"]),(0,n.createVNode)(c,{class:"app-object-panel__object-name",ellipsis:""},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(i.name),1)]})),_:1}),(0,n.createElementVNode)("div",se,[(0,n.createElementVNode)("span",ce,(0,n.toDisplayString)(o.t("viewer.plugins.BoardItemsVisibility.only")),1),(0,n.createVNode)(s,{name:a.iconVisible,class:"app-object-panel__btn-icon"},null,8,["name"])])],2)}],["__scopeId","data-v-3cee8e5a"]]);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function fe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function de(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(i),!0).forEach((function(t){me(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function me(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ve=window.__APP__.library.Vuex,he=ve.mapState,ge=ve.mapGetters,we=ve.mapMutations;const Ve={name:"AppObjectsList",components:{ObjectsButton:be,AfsAccordion:D.A,AfsIcon:le._,AfsText:w.A},computed:de(de(de({},he(["objects","groupAllObjects","prevObjectData"])),ge(["isPCBView3D"])),{},{listObjects:function(){return this.isPCBView3D?this.objects.filter((function(e){return!e.isOnly2d})):this.objects},hasObjects:function(){return!!this.listObjects.length},iconVisible:function(){return this.groupAllObjects.isVisible?"eye-16-2":"eye-off-16-2"},hasObjectChanges:function(){return JSON.stringify(this.objects)!==this.prevObjectData}}),watch:{hasObjectChanges:function(e){this.setResetData({key:"objects",val:e})}},methods:de(de({},we(["setObjects","setResetData","setGroupAllObjectsVisible","setGroupAllObjectsVisibleOnly"])),{},{changeObject:function(e){this.setGroupAllObjectsVisibleOnly(null),this.toggleItem(e),"unrotedNet"===e.id?this.$emit("toggle-unroted-net",{visible:!e.isVisible}):this.$emit("toggle-object",{kind:e.id,visible:!e.isVisible})},changeOnly:function(e){this.groupAllObjects.visibleOnly!==e.id&&(this.toggleAllObject(!1),this.changeObject(de(de({},e),{},{isVisible:!1})),this.setGroupAllObjectsVisibleOnly(e.id))},toggleItem:function(e){var t=this.objects.map((function(t){return de(de({},t),{},{isVisible:e.id===t.id?!t.isVisible:t.isVisible})}));this.setGroupAllObjectsVisible(t.some((function(e){return e.isVisible}))),this.setObjects(t)},onClickGroupe:function(){this.setGroupAllObjectsVisibleOnly(null),this.setGroupAllObjectsVisible(!this.groupAllObjects.isVisible),this.toggleAllObject(this.groupAllObjects.isVisible)},resetData:function(){this.setGroupAllObjectsVisible(!0),this.toggleAllObject(!0),this.setGroupAllObjectsVisibleOnly(null)},toggleAllObject:function(e){this.$emit("toggle-object",{kind:this.groupAllObjects.id,visible:e}),this.$emit("toggle-unroted-net",{visible:e});var t=this.objects.map((function(t){return de(de({},t),{},{isVisible:e})}));this.setObjects(t)}})},Oe=(0,j.Z)(Ve,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsText"),c=(0,n.resolveComponent)("AfsIcon"),l=(0,n.resolveComponent)("ObjectsButton"),u=(0,n.resolveComponent)("AfsAccordion");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ae,[a.hasObjects?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,"has-arrow":!1,class:(0,n.normalizeClass)(["app-object-panel__acc",{"is-disable":!e.groupAllObjects.isVisible}]),opened:"","has-header-addon":""},{header:(0,n.withCtx)((function(){return[(0,n.createVNode)(s,{class:"app-object-panel__group-title",ellipsis:""},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(e.groupAllObjects.name),1)]})),_:1})]})),"additional-menu":(0,n.withCtx)((function(){return[(0,n.createElementVNode)("div",{class:"app-object-panel__btn-visibility",onClick:t[0]||(t[0]=function(){return a.onClickGroupe&&a.onClickGroupe.apply(a,arguments)})},[(0,n.createVNode)(c,{name:a.iconVisible,class:"app-object-panel__btn-icon"},null,8,["name"])])]})),body:(0,n.withCtx)((function(){return[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.listObjects,(function(e){return(0,n.openBlock)(),(0,n.createBlock)(l,{key:e.id,name:e.name,icon:e.icon,"is-visible":e.isVisible,onChangeObject:function(t){return a.changeObject(e)},onChangeOnly:function(t){return a.changeOnly(e)}},null,8,["name","icon","is-visible","onChangeObject","onChangeOnly"])})),128))]})),_:1},8,["class"])):(0,n.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-b0d4e50c"]]);var je=window.__CORE__;const _e={name:"ObjectsPanel",components:{ObjectsList:Oe},methods:{setObjectChange:function(e){je.bus.emit("PcbEngine:toggleObject",e)},setUnrotedNet:function(e){je.bus.emit("PcbEngine:toggleUnrotedNet",e)},reset:function(){this.$refs.objectsList&&this.$refs.objectsList.resetData()}}},Pe=(0,j.Z)(_e,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("ObjectsList");return(0,n.openBlock)(),(0,n.createElementBlock)("div",oe,[(0,n.createVNode)(s,{ref:"objectsList",onToggleObject:a.setObjectChange,onToggleUnrotedNet:a.setUnrotedNet},null,8,["onToggleObject","onToggleUnrotedNet"])])}],["__scopeId","data-v-6fe87c76"]]);var Ae={class:"tab-panel"},Ce=i(15938),Se=i(91261),ke=i(74839),Be=i(75419);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ie(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function De(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(i),!0).forEach((function(t){Ee(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ee(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Te=window.__APP__.library.Vuex,Ne=Te.mapState,xe=Te.mapGetters,Me=Te.mapMutations,Ge=window.__APP__.library.i18n.t;const Re={name:"TabPanel",components:{AfsTabs:Ce.Z,AfsButtonIcon:E.A,AfsContextMenu:Se.C},directives:{hint:Be.h},data:function(){return{t:Ge}},computed:De(De(De({},Ne(["activeTabView"])),xe(["getIsResetData","getTabsViews","isObjectsPanel"])),{},{hintText:function(){var e=this.isObjectsPanel?"viewer.plugins.BoardItemsVisibility.resetObjects":"viewer.plugins.BoardItemsVisibility.resetLayers";return this.t(e)},onlyOne:function(){return this.getTabsViews.length<=1},hintId:function(){return(0,ke.g)()},hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"center"},offset:8}}}),methods:De(De({},Me(["setActiveTabView","setResetData"])),{},{onChange:function(e){var t=e.find((function(e){return e.isActive}));null!=t&&t.id&&this.setActiveTabView(t.id)},onReset:function(){this.setResetData({key:this.activeTabView,val:!1}),this.$emit("reset")}})},Ue=(0,j.Z)(Re,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsTabs"),c=(0,n.resolveComponent)("AfsButtonIcon"),l=(0,n.resolveComponent)("AfsContextMenu"),u=(0,n.resolveDirective)("hint");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Ae,[(0,n.createVNode)(s,{class:(0,n.normalizeClass)(["tab-panel__buttons",{"tab-panel__only-one":a.onlyOne}]),"model-value":e.getTabsViews,"onUpdate:modelValue":a.onChange},null,8,["class","model-value","onUpdate:modelValue"]),(0,n.withDirectives)((0,n.createVNode)(c,{class:"tab-panel__buttons-reset",icon:"revert",transparent:"",onClick:a.onReset},null,8,["onClick"]),[[n.vShow,e.getIsResetData],[u,void 0,a.hintId]]),(0,n.createVNode)(l,(0,n.normalizeProps)((0,n.guardReactiveProps)(a.hintConfig)),{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(a.hintText),1)]})),_:1},16)])}],["__scopeId","data-v-3a931345"]]);var Fe={class:"app-board-control__controls"},$e=i(30171);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function ze(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function He(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(i),!0).forEach((function(t){qe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ze(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function qe(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Je=window.__CORE__,Ke=window.__APP__,Xe=Ke.analytics,Qe=Ke.library,We=Qe.Vuex,Ye=We.mapState,et=We.mapGetters,tt=Qe.i18n.t;const it={name:"AppBoardControl",components:{AfsTabs:Ce.Z,AfsLink:$e.A},data:function(){return{t:tt}},computed:He(He({},Ye(["hasLayerStack"])),et(["getLayersViews","isLayersPanel"])),methods:{onChange:function(e){var t=e.find((function(e){return e.isActive}));this.$emit("view-change",r[t.id])},onClick:function(){Je.bus.emit("LSMView:updateInterface",{hidden:!1}),Je.bus.emit("View:set","LSMView"),Xe.dispatchViewEvent("Stackup")}}},nt=(0,j.Z)(it,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("AfsTabs"),c=(0,n.resolveComponent)("AfsLink");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Fe,[(0,n.createVNode)(s,{class:"app-board-control__controls-btn","model-value":e.getLayersViews,"onUpdate:modelValue":a.onChange},null,8,["model-value","onUpdate:modelValue"]),e.hasLayerStack&&e.isLayersPanel?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,href:"#",onClick:(0,n.withModifiers)(a.onClick,["prevent"])},{default:(0,n.withCtx)((function(){return[(0,n.createTextVNode)((0,n.toDisplayString)(o.t("viewer.plugins.BoardItemsVisibility.viewStackup")),1)]})),_:1},8,["onClick"])):(0,n.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-ee46f088"]]);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function at(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(i),!0).forEach((function(t){st(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ot(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function st(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ct=window.__APP__.library.Vuex,lt=ct.mapState,ut=ct.mapGetters,pt=window.__CORE__,bt={layers:"LayersPanel",objects:"ObjectsPanel"};const yt={name:"AppBoardItemsVisibility",components:{LayersPanel:re,ObjectsPanel:Pe,TabPanel:Ue,BoardControl:nt},props:{id:String},computed:at(at(at({},lt(["activeTabView"])),ut(["isPCBView3D"])),{},{activeComponent:function(){return bt[this.activeTabView]}}),methods:{resetData:function(){this.$refs.component&&this.$refs.component.reset()},changeView:function(e){this.isPCBView3D?pt.bus.emit("PCBView3D:flipBoard",e):pt.bus.emit("BoardItemsVisibility:viewChange",e)}}},ft=(0,j.Z)(yt,[["render",function(e,t,i,r,o,a){var s=(0,n.resolveComponent)("TabPanel"),c=(0,n.resolveComponent)("BoardControl");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{id:i.id,class:"board-visibility"},[(0,n.createVNode)(s,{onReset:a.resetData},null,8,["onReset"]),(0,n.createVNode)(c,{onViewChange:a.changeView},null,8,["onViewChange"]),((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(a.activeComponent),{ref:"component"},null,512))],8,v)}],["__scopeId","data-v-934e4e26"]]);function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function mt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ht(n.key),n)}}function vt(e,t,i){return(t=ht(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ht(e){var t=function(e,t){if("object"!=dt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dt(t)?t:t+""}var gt="layerManagerCreated",wt=function(){return e=function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vt(this,"onBoardViewActivate",(function(e){i.observedViews.has(e.name)&&(i.logger.LogDebug("Start lookup for ".concat(i.boardViewName)),i.boardViewName=e.name,i.instance=e.instance,i.engine&&i.engine.layerManager&&i.didLayerManagerCreated(i.engine.layerManager),i.core.bus.on("".concat(i.boardViewName,":").concat(gt),i.didLayerManagerCreated))})),vt(this,"onBoardViewDeactivate",(function(){i.logger.LogDebug("Finish lookup for ".concat(i.boardViewName)),i.core.bus.off("".concat(i.boardViewName,":").concat(gt),i.didLayerManagerCreated)})),vt(this,"didLayerManagerCreated",(function(e){i.core.bus.emit("BoardItemsVisibility:".concat(gt),e)})),this.core=t,this.logger=t.createLogger("BoardViewObserver"),this.observedViews=new Set(["PCBView","FabricationView"])},(t=[{key:"engine",get:function(){return window.__CORE__.engines.PcbEngine}},{key:"setup",value:function(){this.logger.LogDebug("Setup"),window.__APP__.eventAttachHelper.onViewActivate(this.onBoardViewActivate),this.core.bus.on("View:deactivate",this.onBoardViewDeactivate)}}])&&mt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Vt=i(67674),Ot=i(73894),jt=i(31444);function _t(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var At={kind:"all",ids:[]},Ct={kind:"keepouts",ids:[]},St={};var kt=window.__APP__.library.i18n.t;const Bt={Arc:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.arc"),icon:"icon-arcs"},Pad:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.pads"),icon:"icon-pads"},Via:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.vias"),icon:"icon-vias"},Track:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.tracks"),icon:"icon-tracks"},Poly:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.poly"),icon:"icon-polygons"},Region:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.region"),icon:"icon-regions"},Fill:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.fill"),icon:"icon-fills"},Text:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.text"),icon:"icon-texts"},Dimension:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.dimension"),icon:"icon-dimension"},Coordinate:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.coordinate"),icon:"icon-coordinates"},Rule:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.rule"),icon:"icon-rooms"},ComponentBody:{name:kt("viewer.plugins.BoardItemsVisibility.objectsData.componentBody"),icon:"icon-3d-body"}};var Lt=window.__APP__.library.i18n.t,It={id:"keepouts",name:Lt("viewer.plugins.BoardItemsVisibility.objectsData.keepouts"),icon:"icon-keepouts",isVisible:!0,isOnly2d:!0},Dt={id:"unrotedNet",name:Lt("viewer.plugins.BoardItemsVisibility.objectsData.connectionLines"),icon:"icon-connection-lines",isVisible:!0,isOnly2d:!0},Et={};var Tt=window.__APP__.library.i18n.t;function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mt(n.key),n)}}function Mt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:t+""}function Gt(e,t,i){return t=Ut(t),function(e,t){if(t&&("object"==Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rt()?Reflect.construct(t,i||[],Ut(e).constructor):t.apply(e,i))}function Rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rt=function(){return!!e})()}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Ft(e,t){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ft(e,t)}var $t=window.__APP__.parentEvents.as(),Zt=function(e){function t(e){var i;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Gt(this,t)).type="unknown",e.response.metadata.projectTypeName){case"AltiumDesigner":case"Eagle":case"KiCad":case"Orcad":case"PadsXpedition":i.type="pcb"}return $t.on("project:pcbView:viewConfiguration:activate",(function(e){"pcb"===i.type&&i.activateRequested.emit(e)})),$t.on("project:pcbView:viewConfiguration:deactivate",(function(){"pcb"===i.type&&i.deactivateRequested.emit()})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(t,window.__APP__.eventEmitters.TypedEventMapHandlers(["activateRequested","deactivateRequested"])),i=t,(n=[{key:"enabled",value:function(){"pcb"===this.type&&$t.emit("project:pcbView:viewConfiguration:enabled")}},{key:"disabled",value:function(){"pcb"===this.type&&$t.emit("project:pcbView:viewConfiguration:disabled")}},{key:"paused",value:function(e){"pcb"===this.type&&$t.emit("project:pcbView:viewConfiguration:paused",e)}},{key:"activated",value:function(){"pcb"===this.type&&$t.emit("project:pcbView:viewConfiguration:activated")}},{key:"deactivated",value:function(){"pcb"===this.type&&$t.emit("project:pcbView:viewConfiguration:deactivated")}}])&&xt(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n}();function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Ht(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function Jt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kt(n.key),n)}}function Kt(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}function Xt(e,t,i){return t=Wt(t),function(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qt()?Reflect.construct(t,i||[],Wt(e).constructor):t.apply(e,i))}function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qt=function(){return!!e})()}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}var ei=window.__APP__.createModule,ti=window.__CORE__,ii=window.__APP__,ni=window.__APP__.analytics,ri=window.__APP__.library.i18n.t,oi=(0,Vt.kD)("data-abom",!1),ai=ei({type:"Plugin",description:"Board Items Visibility",create:function(e){var t=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Xt(this,t,[{name:"BoardItemsVisibility",displayName:ri("viewer.plugins.BoardItemsVisibility.displayName"),displayIcon:"layers-v2-16",comment:"Board Items Visibility",description:"Board Items Visibility",dependencies:[],order:1,owner:"PCBView,PCBView3D,FabricationView",hint:ri("viewer.plugins.BoardItemsVisibility.hint"),view:{type:"modal",title:ri("viewer.plugins.BoardItemsVisibility.displayNameObjects"),config:{type:"aside-left",hasCustomHeader:!0,hasCloseButton:!0,hasCloseOnOutsideClick:!1}}}])).isHidden=!0,e.logger=ti.createLogger("LayersPanel"),e.pcbViewObserver=new wt(ti),e.isLayerStackEnable=!1,oi||e.initOnObjectSetup(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(t,e),i=t,o=[{key:"hidden",get:function(){return this.isHidden}},{key:"setup",value:function(e){var t=this;return this.publicApiEmitter=new Zt(e),new Promise((function(i){var n,r;t.logger.LogDebug("Setup"),t.pcbViewObserver.setup(),t.initListeners(),t.isLayerStackEnable=(null===(n=e.response)||void 0===n||null===(r=n.storage)||void 0===r?void 0:r.files.some((function(e){return"Lsm"===e.fileType})))&&e.views.LSMView&&!oi;var o=(0,Vt.kD)("data-layerstack-label","");t.isLayerStackEnable&&(o&&d((0,Ot.Z)(o)),f(!0)),e.bus.on("storageResolveComplete",(function(i){t.isLayerStackEnable=i.files.some((function(e){return"Lsm"===e.fileType}))&&e.views.LSMView,t.isLayerStackEnable&&f(!0),o&&d((0,Ot.Z)(o))})),t.publicApiEmitter.paused(!0);var a={};window.__APP__.eventAttachHelper.onViewActivate((function(e){return t.setCurrentView(e,a)})),i()}))}},{key:"events",get:function(){return["BoardItemsVisibility:change","BoardItemsVisibility:reset","BoardItemsVisibility:viewChange","BoardItemsVisibility:onOnly","BoardItemsVisibility:offOnly","BoardItemsVisibility:layerOn","BoardItemsVisibility:".concat(gt),"BoardItemsVisibility:getLayersIds","BoardItemsVisibility:setLayerRecoveryData"]}},{key:"setCurrentView",value:function(e,t){var i,n,r,o,a=e.name,s=e.instance,c=t.canBeEnabled,l=t.wasActive,u=["PCBView","FabricationView","GerberCompareTargetView","GerberCompareSourceView"],b=ri("viewer.plugins.BoardItemsVisibility.layers"),y="layers";"PCBView"===a&&(b=ri("viewer.plugins.BoardItemsVisibility.layersObjects"),y="all"),"PCBView3D"===a&&(u.push("PCBView3D"),b=ri("viewer.plugins.BoardItemsVisibility.objects"),y="objects"),t.canBeEnabled=u.includes(a),t.canBeEnabled?(o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[{id:"layers",name:Tt("viewer.plugins.BoardItemsVisibility.layers"),isActive:!1},{id:"objects",name:Tt("viewer.plugins.BoardItemsVisibility.objects"),isActive:!1}],i=t.find((function(t){return t.id===e}));return i?[i]:t}(y),p.commit("setTabViews",o),ti.bus.emit("BoardItemsVisibility:updateInterface",{displayName:b,comment:b,description:b,hint:b}),function(e){p.commit("setActiveView",e)}(null==s||null===(i=s.metaInfo)||void 0===i?void 0:i.displayName),r=null==s||null===(n=s.metaInfo)||void 0===n?void 0:n.name,p.commit("setActiveViewId",r),c!==t.canBeEnabled&&(this.publicApiEmitter.enabled(),l&&(ti.bus.emit("BoardItemsVisibility:enable"),t.wasActive=!1))):c!==t.canBeEnabled&&(t.wasActive=this.active,ti.bus.emit("BoardItemsVisibility:disable"),this.publicApiEmitter.disabled())}},{key:"initView",value:function(){var e,t;this.logger.LogDebug("InitView"),this.inited=!0,this.view=(e=this.metaInfo.name,t=(t=document.querySelector("#".concat(e))).parentNode,(0,n.createApp)(ft,{id:e}).use(m).mount(t))}},{key:"activateInternal",value:function(){this.logger.LogDebug("Activate"),this.inited||this.initView(),this.publicApiEmitter.activated(),ni.dispatchPanelsEvent("".concat(p.state.activeView,".LayerFilter"),{action:"Opened"})}},{key:"deactivateInternal",value:function(){this.logger.LogDebug("Deactivate"),this.publicApiEmitter.deactivated()}},{key:"initListeners",value:function(){var e=this;this.initOnEngineSetup(),this.initOnReset(),this.initOnViewChange(),this.initOnLayersChange(),this.initOnOnly(),this.initOffOnly(),this.initOnFlipped(),this.publicApiEmitter.activateRequested.on((function(){!e.isHidden&&!e.active&&ti.bus.emit("BoardItemsVisibility:enable")})),this.publicApiEmitter.deactivateRequested.on((function(){e.active&&ti.bus.emit("BoardItemsVisibility:disable")}))}},{key:"initOnLayersChange",value:function(){var e=this;ti.bus.on("BoardItemsVisibility:change",(function(t){e.layerManager.setLayers(t.flat())}))}},{key:"initOnEngineSetup",value:function(){var e=this;ti.bus.on("LayerManager:changedLayers",(function(t){if(Array.isArray(t.data)&&t.data.length&&e.layerManager){var i=e.layerManager.getGroupedLayers();e.setLayers(i)}})),ti.bus.on("BoardItemsVisibility:".concat(gt),(function(t){if(e.layerManager=t,e.layerManager){e.isHidden=!1,ti.bus.emit("BoardItemsVisibility:updateInterface",{hidden:!1}),e.publicApiEmitter.paused(!1);var i=e.layerManager.getGroupedLayers();e.setLayers(i),y(e.layerManager.viewType),t.on&&t.on("changed",(function(){var t=e.layerManager.getGroupedLayers();e.setLayers(t)}))}})),ti.bus.once("BoardItemsVisibility:setLayerRecoveryData",(function(e){b(e)}))}},{key:"initOnObjectSetup",value:function(){var e=this;ti.bus.on("PcbEngine:documentChanged",(function(){try{e.isHidden=!1,ti.bus.emit("BoardItemsVisibility:updateInterface",{hidden:!1}),p.commit("setGroupAllObjectsVisible",!0),p.commit("setGroupAllObjectsVisibleOnly",null);var t=ti.response.metadata;if(t){var i=function(e){if(!e)return[];Et={};var t=[];e.forEach((function(e){e.primitives&&(t=t.concat(e.primitives))})),e.forEach((function(e){if(7!=+e.kind&&!t.includes(e.id)){var i=(0,jt.MS)(e.kind),n=i&&(0,jt.cE)(i)||"";if(n=n&&"None"!==n?n:""){var r,o,a={kind:i,item:e,currentName:(null===(r=Bt[n])||void 0===r?void 0:r.name)||n,currentIcon:(null===(o=Bt[n])||void 0===o?void 0:o.icon)||"help-12"};a.item.keepout||function(e){Et[e.kind]||(Et[e.kind]={id:e.kind,name:e.currentName,icon:e.currentIcon,isVisible:!0})}(a)}}}));var i=Object.keys(Et).map((function(e){return Et[e]}))||[];return i.length&&(i.push(It),i.push(Dt)),i}(t.primitives);!function(e){p.commit("setObjects",e)}(i),function(e){p.commit("setPrevObjectData",e)}(i),e.updateListObjectIds()}}catch(t){e.logger.LogError("Error while changing document",t)}})),ti.bus.on("Variants:changed",(function(t){if(!e.isHidden)try{var i=(null==t?void 0:t.projectVariant)||"";if(null!=t&&t.forceUpdate)return;e.updateListObjectIds(i)}catch(t){e.logger.LogError("Error while changing viriants",t)}}))}},{key:"initOnReset",value:function(){var e=this;ti.bus.on("BoardItemsVisibility:reset",(function(){e.layerManager.resetLayers(),y(e.layerManager.viewType);var t=e.layerManager.getGroupedLayers();b(t)}))}},{key:"initOnViewChange",value:function(){var e=this;ti.bus.on("BoardItemsVisibility:viewChange",(function(t){return e.setLayersView(t)}))}},{key:"initOnFlipped",value:function(){ti.bus.once("ParentConnection:setDocumentLocationPCB",(function(e){e.flipped&&ti.bus.once("PcbEngine:documentChanged",(function(){ti.bus.emit("BoardItemsVisibility:viewChange",r[2])}))}))}},{key:"initOnOnly",value:function(){var e=this;ti.bus.on("BoardItemsVisibility:onOnly",(function(t){e.layerManager.setOnceLayer(t)})),ti.bus.on("BoardItemsVisibility:layerOn",(function(t){e.layerManager.setLayerOn(t)}))}},{key:"initOffOnly",value:function(){var e=this;ti.bus.on("BoardItemsVisibility:offOnly",(function(){e.layerManager.resetOnceLayer()}))}},{key:"setLayers",value:function(e){!function(e){p.commit("setLayers",e)}(e),this.saveLayersInUrl(e)}},{key:"saveLayersInUrl",value:function(e){var t=e.flat().reduce((function(e,t){return t.isActive&&(e.active=t.metaId),t.isVisible&&e.visible.push(t.metaId),e}),{active:null,visible:[]});ii.parentEvents.emit("BoardItemsVisibility:getLayersIds",t),ti.bus.emit("CommentPanel:setDocumentLayers",t)}},{key:"setLayersView",value:function(e){y(e),e&&this.layerManager&&("top"===e&&this.layerManager.setTopView&&this.layerManager.setTopView(),"bottom"===e&&this.layerManager.setBottomView&&this.layerManager.setBottomView())}},{key:"updateListObjectIds",value:function(e){var t=ti.response.metadata;if(t){var i=t.primitives,n=e?((null==t?void 0:t.projectVariants)||[]).reduce((function(t,i){return(null==e?void 0:e.uniqueId)!==i.uniqueId&&null!=i&&i.graphite&&Array.isArray(null==i?void 0:i.graphite)&&(t=[].concat(Ht(t),Ht(i.graphite))),t}),[]):[],r=function(e){if(!e)return[];At.ids=[],Ct.ids=[],St={};var t=[];for(var i in e.forEach((function(e){e.primitives&&(t=t.concat(e.primitives))})),e.forEach((function(i){if(7!=+i.kind&&!t.includes(i.id)){var n=(0,jt.MS)(i.kind),r=n&&(0,jt.cE)(n)||"";if(r=r&&"None"!==r?r:""){var o={kind:n,item:i};o.item.keepout?Ct.ids.push(o.item.pcbId):function(e,t){if(St[e.kind]?e.item.pcbId&&St[e.kind].ids.push(e.item.pcbId):St[e.kind]={kind:e.kind,ids:[e.item.pcbId]},e.item.primitives){var i=e.item.primitives.map((function(e){var i;return null===(i=t[e])||void 0===i?void 0:i.pcbId}));St[e.kind].ids=St[e.kind].ids.concat(i)}}(o,e)}}})),St.keepouts=Ct,St)At.ids=[].concat(_t(At.ids),_t(St[i].ids));return St.all=At,St}(i.filter((function(e){return!n.includes(e.pcbId)})));ti.bus.emit("PcbEngine:listObjectIds",r),n.length&&ti.bus.emit("PcbEngine:toggleObjectVariant",{ids:n,visible:!1}),e&&ti.bus.emit("PcbEngine:toggleObjectVariant",{ids:(null==e?void 0:e.graphite)||[],visible:!0})}}}],o&&Jt(i.prototype,o),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o}(e);return new t}});ti&&ti.addModule(ai)},10311:e=>{e.exports=Vue}},e=>{e.O(0,[66951,21759],(()=>e(e.s=26940))),e.O()}]);